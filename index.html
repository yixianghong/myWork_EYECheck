<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="CSS/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.css" rel="stylesheet" />
    <link href="CSS/main.css?2021" rel="stylesheet" />
</head>
<body>
    <div id="container">
        <header>
            <div class="ml-4">
                <img style="width: 110px;" src="Images/Logo.svg" />
            </div>
            <div class="d-flex mr-4">
                <a target="_blank" href="https://lin.ee/1vzfJme" class="mr-4">
                    <img style="height: 32px;" src="Images/Icon01.svg" />
                </a>
                <a target="_blank" href="https://m.eyedoctor.com.tw/ViewsVB/Clinic.aspx">
                    <img style="height: 32px;" src="Images/Icon02.svg" />
                </a>
            </div>
        </header>
        
        <!-- <footer>
            <a href="/VisionScreenCheck/index">
                <img class="IconLink" src="Images/IconPic03_active.png" /><br>
                <span  class="color-blue">線上檢測</span>
            </a>
            <a href="/VisionScreenCheck/KnowMyopia">
                <img class="IconLink" src="Images/IconPic04.png" /><br>
                <span>認識近視</span>
            </a>
            <a href="/VisionScreenCheck/PreventMyopia">
                <img class="IconLink" src="Images/IconPic05.png" /><br>
                <span>近視控制</span>
            </a>
        </footer> -->
        <main>
            <div id="Check-list">
                <div class="text-center">
                    <img class="BNPic" src="Images/BNPic01.png" />
                </div>
                <div class="textBox">
                    <p class="mb-0">
                        <span style="font-size:20px;font-weight:bold">線上檢測輕鬆做！</span><br>及早做好孩子的視力管理
                    </p>
                </div>
                <div class="d-flex justify-content-center">
                    <div class="list-item color-blue" data-title="視力自檢" data-item="EyeCheck">
                        視力自檢
                    </div>
                    <div class="list-item color-green" data-title="色覺自檢" data-item="ColorCheck">
                        色覺自檢
                    </div>
                </div>
               
              
            </div>
            <div id="Item-list" class="exitRightWindow">
                <div class="item-EyeCheck itme-Check">
                     <div id="item-EyeCheck-step1" class="noTransition">
                         <div>
                            <img src="Images/BNPic02.svg" />
                         </div>
                         <div class="content">
                            <div class="text-center color-blue" style="padding: 15px;">為保障您的權益，請確認以下條款內容</div>
                            <div class="p-3 attentionBox">
                                <p>免責聲明：</p>
                                <p>本網頁之視力檢查僅為輔助參考，並非醫學檢驗，不可取代專業眼科醫師及驗光師(生)之診斷與處方 。</p>
                                <p class="mb-0">本檢測僅提供一般視力參考，不適用於診斷疾病、治療、舒緩、預防疾病或其他情況。如有問題，應尋求專業眼科醫師診療。</p>
                            </div>
                            <div class="form-check text-center mt-1 mb-2">
                                <input class="form-check-input invalidCheck" type="checkbox" id="invalidEyeCheck" required="">
                                <label class="form-check-label" for="invalidEyeCheck">
                                    已閱讀，並同意以上條文
                                </label>
                            </div>
                        </div>
                         <div class="btnBox">
                            <button class="w-80 btn pageBtn btn-block btn-primary screen-reset" data-nextpage="item-EyeCheck-step2" data-backpage="item-EyeCheck-step1" disabled>下一步</button>
                            <div class="w-80 pageBtn text-center btn-block color-blue" data-nextpage="Check-list" data-backpage="item-EyeCheck-step1">回上一步</div>
                         </div>
                     </div>
                     <div id="item-EyeCheck-step2" class=" d-none-J noTransition">
                         <div>
                            <img src="Images/BNPic03.svg" />  
                         </div>
                         <div class="content">
                            <div class="pt-3">
                                <div class="text-center standContainer">
                                    <img class="screenReset"src="Images/screenReset.svg" />
                                    <div class="d-flex justify-content-around w-80">
                                        <div class="changeSmall changeBtn">
                                            <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-dash" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="color:#26B5E9">
                                                <path fill-rule="evenodd" d="M3.5 8a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z" />
                                            </svg>
                                        </div>
                                        <div class="d-flex align-items-center">
                                            <input type="range" class="form-control-range" id="formControlRange" value="100" oninput="showVal(this.value)" min="0" max="200">
                                        </div>

                                        <div class="changeBig changeBtn">
                                            <svg width="2em" height="2em" viewBox="0 0 16 16" class="bi bi-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg" style="color:#26B5E9">
                                                <path fill-rule="evenodd" d="M8 3.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H4a.5.5 0 0 1 0-1h3.5V4a.5.5 0 0 1 .5-.5z"></path>
                                                <path fill-rule="evenodd" d="M7.5 8a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H8.5V12a.5.5 0 0 1-1 0V8z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                <div class="w-80 p-2">
                                    <p class="color-blue mb-0" style="font-size:14px;">*將10元硬幣或尺置於螢幕圖案上，點擊“放大”或“縮小”按鈕，調整螢幕上圖案到真實大小(10元硬幣的直徑為2.6cm)</p>
                                </div>
                            </div>
                        </div>
                         <div class="btnBox">
                              <div class="w-80 btn pageBtn btn-primary btn-block" data-nextpage="item-EyeCheck-step3" data-backpage="item-EyeCheck-step2">校準完成</div>
                              <div class="w-80 pageBtn text-center btn-block color-blue" data-nextpage="item-EyeCheck-step1" data-backpage="item-EyeCheck-step2">回上一步</div>
                         </div>
                     </div>
                      <div id="item-EyeCheck-step3" class="d-none-J noTransition">
                         <div>
                            <img src="Images/BNPic04.svg" />  
                         </div>
                         <div class="content">
                            <div class="w-80 HowToUse">
                                <div class="color-blue HowToUseTitle" style="background: #CFEAF5;padding:0.5rem">步驟一</div>
                                <div class="HowToUseSlide">
                                    <div class="absolute nextBtn" style="top: 50%;left: 2px;color: #2C8CC7;" data-id="-1">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                                        </svg>
                                    </div>
                                    <img data-slide="1" data-text="步驟一" class="slide active" src="Images/Demo01.svg?2020" />
                                    <img data-slide="2" data-text="步驟二" class="slide" src="Images/Demo02.svg?2021" />
                                    <img data-slide="3" data-text="步驟三" class="slide" src="Images/Demo03.svg?2020" />
                                    <div class="absolute d-flex selectSlideBox">
                                        <div data-slide="1" data-text="步驟一" class="selectSlide active" data-id="1"></div>
                                        <div data-slide="2" data-text="步驟二" class="selectSlide" data-id="2"></div>
                                        <div data-slide="3" data-text="步驟三" class="selectSlide" data-id="3"></div>
                                    </div>
                                    <div class="absolute nextBtn" style="top: 50%;right: 2px;color: #2C8CC7;" data-id="1"> 
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div class="btnBox">
                              <div class="w-80 btn pageBtn btn-primary btn-block startREYEBtn" data-nextpage="item-EyeCheck-step4" data-backpage="item-EyeCheck-step3">開始測驗</div>
                              <div class="w-80 pageBtn text-center btn-block color-blue" data-nextpage="item-EyeCheck-step2" data-backpage="item-EyeCheck-step3">回上一步</div>
                         </div>
                     </div>
                     <div id="item-EyeCheck-step4" class="d-none-J noTransition">
                         <div class="text-center mb-4 pb-4 pt-4 checkImg">
                             <div class="EyeCheck" data-id="1" data-result="0.1" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck1.png" />
                                 <div class="showVision">0.1</div>
                             </div>
                             <div class="EyeCheck" data-id="2" data-result="0.2" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck2.png" />
                                 <div class="showVision">0.2</div>
                             </div>
                             <div class="EyeCheck" data-id="3" data-result="0.3" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck3.png" />
                                 <div class="showVision">0.3</div>
                             </div>
                             <div class="EyeCheck" data-id="4" data-result="0.4" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck4.png" />
                                 <div class="showVision">0.4</div>
                             </div>
                             <div class="EyeCheck" data-id="5" data-result="0.5" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck5.png" />
                                 <div class="showVision">0.5</div>
                             </div>
                             <div class="EyeCheck" data-id="6" data-result="0.6" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck6.png" />
                                 <div class="showVision">0.6</div>
                             </div>
                             <div class="EyeCheck" data-id="7" data-result="0.7" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck7.png" />
                                 <div class="showVision">0.7</div>
                             </div>
                             <div class="EyeCheck" data-id="8" data-result="0.8" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck8.png" />
                                 <div class="showVision">0.8</div>
                             </div>
                             <div class="EyeCheck" data-id="9" data-result="0.9" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck9.png" />
                                 <div class="showVision">0.9</div>
                             </div>
                             <div class="EyeCheck" data-id="10" data-result="1.0" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck10.png" />
                                 <div class="showVision">1.0</div>
                             </div>
                             <div class="EyeCheck" data-id="11" data-result="1.2" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck11.png" />
                                 <div class="showVision">1.2</div>
                             </div>
                             <div class="EyeCheck" data-id="12" data-result="1.5" data-answer="">
                                 <img class="CheckTest" src="Images/EyeCheck12.png" />
                                 <div class="showVision">1.5</div>
                             </div>
                         </div>
                         <div class="m-4 arrowArea">
                             <div class="arrowAreaAlert">
                                 <p style="font-size: 22px;">測驗：<span class="RightORLeft"></span></p>
                                 <p class="RightORLeftInfo" style="color:red"></p>
                                 <p>請依孩童反應<br>點擊對應方向</p>
                             </div>
                             <div class="arrow arrowUp EyeCheckAnsBtn noTransition" data-ans="TurnUp">
                                <img src="Images/arrow.png" />
                             </div>
                             <div class="arrow arrowDown EyeCheckAnsBtn noTransition" data-ans="TurnDown">
                                <img src="Images/arrow.png" />
                             </div>
                             <div class="arrow arrowLeft EyeCheckAnsBtn noTransition" data-ans="TurnLeft">
                                <img src="Images/arrow.png" />
                             </div>
                             <div class="arrow arrowRight EyeCheckAnsBtn noTransition" data-ans="TurnRight">
                                <img src="Images/arrow.png" />
                             </div>
                         </div>
                         <div class="complete completeTestWrap d-none-J noTransition"></div>
                         <div class="complete completeTest p-3 d-none-J noTransition">
                             <div>
                                <img style="width:111px;" class="mb-1" src="Images/Img02.png" />
                                <p><span class="color-blue" style="font-size:24px;">恭喜你完成測驗</span><br />來看看結果吧!</p>
                             </div>
                             <div class="pageBtn mb-2 completeBtn" data-nextpage="item-EyeCheck-step5" data-backpage="item-EyeCheck-step4">GO</div>
                         </div>
                     </div>
                      <div id="item-EyeCheck-step5" class="d-none-J noTransition">
                          <div class="AnalysisArea">
                              <div class="AnalysisHeader text-center">
                                  <div>
                                      <h4 class="mb-0 color-blue">視力自檢結果</h4>
                                      <div class="text-gray" style="font-size:14px;">檢測時間：<span class="Today"></span></div>
                                  </div>
                                  <div class="d-flex justify-content-around mt-3">
                                      <div class="d-flex flex-column">
                                          <div class="eyeDataTitle">左眼</div>
                                          <div class="eyeDataResult eyeDataResultL"></div>
                                      </div>
                                      <div class="d-flex flex-column">
                                          <div class="eyeDataTitle">右眼</div>
                                          <div class="eyeDataResult eyeDataResultR"></div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="m-auto" style="width:80%">
                            <img src="Images/visiontable.svg?2020" />
                          </div>
                           <div class="buttonArea justify-content-around d-flex">
                              <div class="pageBtn startREYEBtn mr-3" data-nextpage="item-EyeCheck-step4" data-backpage="item-EyeCheck-step5">重新測驗視力</div>
                              <div class="pageBtn gobacktohome" data-nextpage="Check-list" data-backpage="item-EyeCheck-step3">回首頁</div>
                         </div>
                      </div>
                </div>
                <div class="item-ColorCheck itme-Check">
                    <div id="item-ColorCheck-step1" class="noTransition">
                         <div>
                            <img src="Images/BNPic05.svg" />
                         </div>
                         <div class="content">
                         <div class="text-center color-green" style="margin: 1rem 0;">為保障您的權益，請確認以下條款內容</div>
                         <div class="p-3 attentionBox">
                             <p>免責聲明：</p>
                             <p>本網頁之色覺檢查僅為輔助參考，並非醫學檢驗，不可取代專業眼科醫師及驗光師(生)之診斷與處方 。</p>
                             <p class="mb-0">本檢測僅提供一般視力參考，不適用於診斷疾病、治療、舒緩、預防疾病或其他情況。如有問題，應尋求專業眼科醫師診療。</p>
                         </div>
                          <div class="form-check text-center mt-1 mb-2">
                            <input class="form-check-input invalidCheck" type="checkbox" id="invalidColorCheck" required="">
                            <label class="form-check-label" for="invalidColorCheck">
                                已閱讀，並同意以上條文
                            </label>
                          </div>
                        </div>
                         <div class="btnBox">
                            <button class="w-80 btn pageBtn btn-block btn-green screen-reset" data-nextpage="item-ColorCheck-step2" data-backpage="item-ColorCheck-step1"  disabled>下一步</button>
                            <div class="w-80 pageBtn text-center btn-block color-green" data-nextpage="Check-list" data-backpage="item-ColorCheck-step1">回上一步</div>
                         </div>
                    </div>
                    <div id="item-ColorCheck-step2" class="d-none-J noTransition">
                        <div>
                            <img src="Images/BNPic06.svg" />  
                         </div>
                         <div class="content">
                            <div class="w-80 HowToUse">
                                <div class="color-green HowToUseTitle" style="background: #B8E0E7;padding:0.5rem">步驟一</div>
                                <div class="HowToUseSlide">
                                    <div class="absolute nextBtn color-green" style="top: 50%;left: 10px" data-id="-1">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z" />
                                        </svg>
                                    </div>
                                    <img data-slide="1"  data-text="步驟一" class="slide active" src="Images/Demo04.svg?2020" />
                                    <img data-slide="2"  data-text="步驟二" class="slide" src="Images/Demo05.svg?2021" />
                                    <img data-slide="3"  data-text="步驟三" class="slide" src="Images/Demo06.svg?2020" />
                                    <div class="absolute d-flex selectSlideBox">
                                        <div data-slide="1" data-text="步驟一" class="selectSlide active" data-id="1"></div>
                                        <div data-slide="2" data-text="步驟二" class="selectSlide" data-id="2"></div>
                                        <div data-slide="3" data-text="步驟三" class="selectSlide" data-id="3"></div>
                                    </div>
                                    <div class="absolute nextBtn color-green" style="top: 50%;right: 10px" data-id="1"> 
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="btnBox">
                            <div class="w-80 btn pageBtn btn-block startColorCheckBtn" style="border: 1px solid #31B7C7;color: #0EA099;" data-type="demo" data-nextpage="item-ColorCheck-step3" data-backpage="item-ColorCheck-step2">練習一下</div>
                              <div class="w-80 btn pageBtn btn-green btn-block startColorCheckBtn" data-type="play" data-nextpage="item-ColorCheck-step3" data-backpage="item-ColorCheck-step2">正式測驗</div>
                              <div class="w-80 pageBtn text-center btn-block color-green" data-nextpage="item-ColorCheck-step1" data-backpage="item-ColorCheck-step2">回上一步</div>
                         </div>
                    </div>
                    <div id="item-ColorCheck-step3" class="d-none-J noTransition">
                        <div class="ColorCheckItemQus">
                            <div class="ColorCheckItem ColorCheck" data-id="1">
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-1-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-1-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-1-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-1-4.png?2019" />
                                </div>
                            </div>
                            <div class="ColorCheckItem ColorCheck" data-id="2">
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-2-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-2-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-2-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-2-4.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-3-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-3-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-3-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-3-4.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-4-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-4-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-4-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-4-4.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-5-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-5-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-5-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-5-4.png?2019" />
                                </div>
                            </div>
                            <div class="ColorCheckItem ColorCheck" data-id="3">
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-6-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-6-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-6-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-6-4.png?2019" />
                                </div>
                            </div>
                            <div class="ColorCheckItem ColorCheck" data-id="4">
                                <div class="ColorCheckAllStyle ColorChecksquare" data-answer="square">
                                    <img src="Images/ColorCheck-7-1.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckround" data-answer="round">
                                    <img src="Images/ColorCheck-7-2.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorChecktriangle" data-answer="triangle">
                                    <img src="Images/ColorCheck-7-3.png?2019" />
                                </div>
                                <div class="ColorCheckAllStyle ColorCheckdiamond" data-answer="diamond">
                                    <img src="Images/ColorCheck-7-4.png?2019" />
                                </div>
                            </div>
                        </div>
                        <h4 class="text-center m-2">請選擇看見的圖形</h4>
                        <div class="ColorCheckItemAns">
                            <div class="col-6 ColorCheckAnsBtn" data-myanswer="square">
                                <img src="Images/ColorCheck-0-1.png?2019" />
                            </div>
                            <div class="col-6 ColorCheckAnsBtn" data-myanswer="round">
                                <img src="Images/ColorCheck-0-2.png?2019" />
                            </div>
                            <div class="col-6 ColorCheckAnsBtn" data-myanswer="triangle">
                                <img src="Images/ColorCheck-0-3.png?2019" />
                            </div>
                            <div class="col-6 ColorCheckAnsBtn" data-myanswer="diamond">
                                <img src="Images/ColorCheck-0-4.png?2019" />
                            </div>
                        </div>
                        <div class="noTransition d-none-J">
                            <div class="btn pageBtn btn-secondary btn-block" data-nextpage="item-ColorCheck-step2" data-backpage="item-ColorCheck-step3">回上一步</div>
                            <div class="btn pageBtn colorFinal btn-primary btn-block mb-2" data-nextpage="item-ColorCheck-step4" data-backpage="item-ColorCheck-step3">查看結果</div>
                        </div>
                    </div>
                    <div id="item-ColorCheck-step4" class="d-none-J noTransition">

                        <div class="AnalysisArea">
                              <div class="AnalysisHeader text-center">
                                  <div>
                                      <h4 class="mb-0 color-green">色覺自檢結果</h4>
                                      <div class="text-gray" style="font-size:14px;">檢測時間：<span class="Today"></span></div>
                                  </div>
                                  <div class="d-flex justify-content-around mt-3">
                                       <div><span class="eyeColorTitle"></span><br><span class="eyeColorResult"></span></div>
                                  </div>
                              </div>
                          </div>
                          <div class="m-auto text-center colorCheckResult">
                              <img class="d-none-J w-100 " data-colorResult="1" src="Images/colorResult01.png?2020" />
                              <img class="d-none-J w-100" data-colorResult="2" src="Images/colorResult02.png?2020" />
                              <img class="d-none-J w-100" data-colorResult="3" src="Images/colorResult03.png?2020" />
                          </div>
                         <div class="buttonArea justify-content-around d-flex">
                              <div class="pageBtn startColorCheckBtn mr-3" data-nextpage="item-ColorCheck-step3" data-backpage="item-ColorCheck-step4">重新測驗色覺</div>
                              <div class="pageBtn gobacktohome" data-nextpage="Check-list" data-backpage="item-ColorCheck-step3">回首頁</div>
                         </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
<script src="JS/jquery-1.10.2.js"></script>
<script src="JS/bootstrap.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.js"></script>
<script>

        
    //視力自檢變數
    let goodCount = 0; let badCount = 0; let nextid = 0; let Result = 0
    var finalVisionResult = {}
    var finalColorCheckResult = []
    var myVisionResult = []

    //色覺自檢變數
    let ColorCheckNo = 0
    let CountAnswerRight = 0
    let CountAnswerWrong = 0
    let CountAnswer = 0
    let RedBlind = []
    let GreenBlind = []


    //選擇檢查項目
    $(".list-item").click(function () {
        let item = $(this).data("item")
        let title = $(this).data("title")
        $(".title").text(title)

        $(".item-" + item).show()
        $("#Check-list").addClass("exitLeftWindow")
        $("#Item-list").addClass("enterWindow").removeClass("exitRightWindow")
    })

    //切換頁
    $(".pageBtn").click(function () {
        let nextpage = $(this).data("nextpage")
        let backpage = $(this).data("backpage")

        if (nextpage == "Check-list") {
            window.scroll({
                top: 0,
            })
            $("#Item-list").removeClass("enterWindow").addClass("exitRightWindow")
            $("#Check-list").removeClass("exitLeftWindow")
            $(this).parents(".itme-Check").fadeOut()
             $(".title").text("請選擇檢測項目")
        } else {
            $(`#${backpage}`).fadeOut(50)
            $(`#${nextpage}`).delay(100).fadeIn(300)
        }
    })


    //條款同意checkbox
    $(".invalidCheck").on("change", function () {
        let istrue = $(this).prop("checked")

        if (istrue) {
            $(".invalidCheck").prop("checked",true)
            $(".screen-reset").attr("disabled", false)
        } else {
            $(".invalidCheck").prop("checked",false)
            $(".screen-reset").attr("disabled", true)
        }
    })


    //錢幣變大
    $(".changeBig").click(function () {
         changSize(1)
    })

    //錢幣變小
    $(".changeSmall").click(function () {
         changSize(-1)
    })

    //視力自檢開始
    $(".startREYEBtn").click(function () {
         window.scroll({
                top: 0,
            })
        let initAnswer = getRandomDirect()
        finalVisionResult = {};
        HideHeader()
        emptyVisionData(initAnswer)
        $('main').css({height:100 + 'vh'})
        $(".RightORLeft").text("右眼")
        $(".RightORLeftInfo").text("請遮住左眼")
        $(".complete").hide()
    })

   //視力自檢作答
    $(".EyeCheckAnsBtn").on('click', function () {
        $(this).stop(true).animate({ width: "40px" },200 ,'linear' ).animate({ width: "50px" },200 ,'linear' );

        let id = parseInt($(".EyeCheck.activeShow").attr("data-id"))   //這題ID
        let thisAnswer = $(".EyeCheck.activeShow").attr("data-answer") //這題答案
        let myAnswer = $(this).attr("data-ans")                        //我的答案
        let nextAnswer = getRandomDirect()                             //下一題答案

        if (myAnswer == thisAnswer) { //答對了 goodCount + 1
            goodCount += 1
        } else {                      //答錯了 badCount + 1
            badCount  += 1
        }

        if (goodCount == 2) {   //連續答對兩次換難的圖
            if (nextid == -1) { //反轉一次 Result + 1;(如果上一次(nextid) 是負的 = 反轉一次)
                Result += 1
                pushVision(id)
            }
            
            nextid = 1

            if (id == 12) {
                Result += 1
                pushVision(id)
                nextid = 0
            }

            resetCount()        // 答對答錯歸零

        } else if (goodCount == 1 && badCount == 0) { //只答對一次不換圖 只換方向

            ChangeImage(id, 0, nextAnswer)
            return

        } else if (badCount == 1) { //答錯一次就換更簡單的圖
             
            if (nextid == 1) {      //反轉一次 Result + 1;(如果上一次(nextid) 是正的 = 反轉一次)
                Result += 1
                pushVision(id - 1)
            }

            nextid = -1

            if (id == 1) {
                Result += 1
                pushVision(id)
                nextid = 0
            }
            resetCount()            // 答對答錯歸零
        }
        if (Result == 3 && !finalVisionResult.REYETEST) {           //Result = 3 (翻轉三次) SHOW結果
            finalVisionResult.REYE = averageArray(myVisionResult)
            finalVisionResult.REYETEST = true
            console.log(finalVisionResult)
            Swal.fire({
                title: '<span style="color:#2E9DCF">恭喜你完成右眼檢測</span>',
                text: "接下來進行左眼的檢測吧!",
                allowOutsideClick: false,
                showCancelButton: false,
                imageUrl: './Images/Img01.png',
                imageWidth: 111,
                imageHeight: 91,
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'GO'
            }).then((result) => {
                if (result.value) {
                    let initAnswer = getRandomDirect()
                    $(".RightORLeft").text("左眼")
                    $(".RightORLeftInfo").text("請遮住右眼")
                    emptyVisionData(initAnswer)
                    return
                }
            })
        } else if (Result == 3 && finalVisionResult.REYETEST) {
            const date = new Date()
            finalVisionResult.LEYE = averageArray(myVisionResult)
            finalVisionResult.LEYETEST = true
            $(".eyeDataResultL").text(finalVisionResult.LEYE)
            $(".eyeDataResultR").text(finalVisionResult.REYE)
            $("#item-EyeCheck-step5 .Today").html(date.toLocaleDateString().slice(0,16))
            $(".complete").fadeIn()
            ShowHeader()
            $('main').css({height:93 + 'vh'})
            return
        }

        ChangeImage(id, nextid, nextAnswer)

    })

   

    //色覺自檢
    $(".startColorCheckBtn").click(function () {
         window.scroll({
                top: 0,
            })
        let type = $(this).attr("data-type")
        let Shape = getRandomShape()
        HideHeader()
        emptyColorData()
        if (type == 'demo') {
            ChangeShape(Shape, ColorCheckNo, 0)
        } else {
            ColorCheckNo += 1
            ChangeShape(Shape, ColorCheckNo, 0)
        }
    })

    //色覺自檢作答
    $(".ColorCheckAnsBtn").click(function () {
        $(this).css("transform", "scale(0.9)")
        setTimeout(function () { $(".ColorCheckAnsBtn").css("transform", "scale(1.0)")},250)
        let Shape = getRandomShape()
        let x = NumberRandom()
        let Answer = $(".ColorCheckAllStyle.activeShow").attr("data-answer")
        let MyAnswer = $(this).attr("data-myanswer")

        if (Answer == MyAnswer) {
            CountAnswerRight += 1
            CountAnswer += 1
        } else {
            CountAnswerWrong += 1
            CountAnswer += 1
        }

        if (Answer == MyAnswer && ColorCheckNo == 2) {
            RedBlind.push(1)
        } else if (Answer !== MyAnswer && ColorCheckNo == 2){
            RedBlind.push(0)
        } else if (Answer == MyAnswer && ColorCheckNo == 3){
            GreenBlind.push(1)
        } else if (Answer !== MyAnswer && ColorCheckNo == 3){
            GreenBlind.push(0)
        }

        if (ColorCheckNo == 0 && Answer == MyAnswer) {
            ChangeShape(Shape, ColorCheckNo, 0)
            Swal.fire({
                title: '答對了',
                text: "您可以進行正式測驗或返回選單",
                type: 'success',
                allowOutsideClick: false,
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                confirmButtonText: '正式測驗',
                cancelButtonText: '回上一步'
            }).then((result) => {
                if (result.value) {
                    ColorCheckNo += 1
                    CountAnswer = 0
                    CountAnswerRight = 0
                    CountAnswerWrong = 0
                    ChangeShape(Shape, ColorCheckNo, 0)
                } else {
                    emptyColorData()
                    $("#item-ColorCheck-step3 .pageBtn[data-nextpage='item-ColorCheck-step2']").click()
                    ShowHeader()
                    $('main').css({height:93 + 'vh'})
                }
            })
        } else if (ColorCheckNo == 0 && Answer !== MyAnswer) {
            Swal.fire({
                title: '答錯了',
                text: "您可以繼續練習或返回選單",
                type: 'warning',
                allowOutsideClick: false,
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                confirmButtonText: '繼續練習',
                cancelButtonText: '回上一步'
            }).then((result) => {
                if (result.value) {
                    ChangeShape(Shape, ColorCheckNo, 0)
                } else {
                    emptyColorData()
                    $("#item-ColorCheck-step3 .pageBtn[data-nextpage='item-ColorCheck-step2']").click()
                    ShowHeader()
                    $('main').css({height:93 + 'vh'})
                }
            })

        } else if (ColorCheckNo == 1 && CountAnswer < 4) {
            ChangeShape(Shape, ColorCheckNo, x)
        } else if (ColorCheckNo == 1 && CountAnswer == 4) {
            if (CountAnswerRight == 4) {
                var ColorTitle = "恭喜您"
                var ColorResult = "您對於顏色分辨的能力結果為正常"
                var ResultID = 1
                FinalColorCheck(ColorTitle,ColorResult,ResultID)
            } else if (CountAnswerRight == 3 && CountAnswerWrong == 1) {
                ChangeShape(Shape, ColorCheckNo, x)
            }
            else {
                ColorCheckNo += 1
                CountClean()
                ChangeShape(Shape, ColorCheckNo, 0)
            }
        } else if (ColorCheckNo == 1 && CountAnswer == 5) {
            if (CountAnswerRight == 4) {
                var ColorTitle = "恭喜您"
                var ColorResult = "您對於顏色分辨的能力結果為正常"
                var ResultID = 1
                FinalColorCheck(ColorTitle,ColorResult,ResultID)
            } else {
                ColorCheckNo += 1
                CountClean()
                ChangeShape(Shape, ColorCheckNo, 0)
            }
        } else if (ColorCheckNo == 2 && CountAnswer < 3) {
            ChangeShape(Shape, ColorCheckNo, 0)
        } else if (ColorCheckNo == 2 && CountAnswer == 3) {
            ColorCheckNo += 1
            CountClean()
            ChangeShape(Shape, ColorCheckNo, 0)
        } else if (ColorCheckNo == 3 && CountAnswer < 3) {
            ChangeShape(Shape, ColorCheckNo, 0)
        } else if (ColorCheckNo == 3 && CountAnswer == 3) {
            let RedPoint = averageArray(RedBlind)
            let GreenPoint = averageArray(GreenBlind)
           
            if (RedPoint < 0.5 && GreenPoint < 0.5) {
                var ColorTitle = "紅綠色覺異常"
                var ColorResult = "您對於紅綠色覺可能有異常<br>建議您至診所接受專業醫師檢測"
                var ResultID = 2
                FinalColorCheck(ColorTitle, ColorResult,ResultID)
            } else if (RedPoint < 0.5 && GreenPoint > 0.5) {
                var ColorTitle = "紅色覺異常"
                var ColorResult = "您對於紅色覺可能有異常<br>建議您至診所接受專業醫師檢測"
                var ResultID = 2
                FinalColorCheck(ColorTitle, ColorResult,ResultID)
            } else if (RedPoint > 0.5 && GreenPoint < 0.5) {
                var ColorTitle = "綠色覺異常"
                var ColorResult = "您對於綠色覺可能有異常<br>建議您至診所接受專業醫師檢測"
                var ResultID = 2
                FinalColorCheck(ColorTitle, ColorResult,ResultID)
            } else {
                var ColorTitle = "色覺疑似異常"
                var ColorResult = "您的色覺疑似異常<br>建議您可重新再測一次"
                var ResultID = 3
                FinalColorCheck(ColorTitle, ColorResult,ResultID)
            }

            $(".colorFinal").click()
        }
    })

    
    //歸零
    function CountClean(){
        CountAnswer = 0
        CountAnswerRight = 0
        CountAnswerWrong = 0
    }

    //歸零
    function resetCount() {
        goodCount = 0
        badCount = 0
    }

    //最終結果
    function FinalColorCheck(ColorTitle,ColorResult,ResultID) {
        ShowHeader()
        $(".colorFinal").click()
        const date = new Date()

        $(".eyeColorResult").html(ColorResult)
        $(".eyeColorTitle").text(ColorTitle)

        $(`img[data-colorResult="${ResultID}"]`).show()
        $(`img[data-colorResult="${ResultID}"]`).siblings("img").hide()
          
        $("#item-ColorCheck-step4 .Today").html(date.toLocaleDateString().slice(0,16))
    }

    function ShowHeader() {
        $("header").slideDown();
        $("footer").fadeIn();
          $("main").css("padding-top",7 + "vh")
    }

    function HideHeader() {
        $("header").slideUp();
        $("footer").fadeOut();
        $("main").css("padding-top", 0)
    }

    //換形狀(色覺)
    function ChangeShape(Shape, ColorCheckNo, x) {
      
        $(`.ColorCheck[data-id='${ColorCheckNo}']`).hide()
        $(`.ColorCheck[data-id='${ColorCheckNo}'] .ColorCheckAllStyle.activeShow`).removeClass("activeShow").fadeOut(100)

        $(`.ColorCheckAllStyle`).fadeOut(100).removeClass("activeShow")
        $(`.ColorCheck[data-id='${ColorCheckNo + 1}']`).show()
        $(`.ColorCheck[data-id='${ColorCheckNo + 1}'] .ColorCheck${Shape}:eq(${x})`).addClass("activeShow").fadeIn(300)
    }

    //清空視力自檢data
    function emptyVisionData(initAnswer) {
        myVisionResult = [];
        Result = 0;
        nextid = 0;
        resetCount();

        $(".EyeCheck").each(function () {$(this).attr("class","EyeCheck").attr("data-answer", "") })
        $(".EyeCheck[data-id='4']").addClass("activeShow").addClass(initAnswer).attr("data-answer", initAnswer)
    }

    //清空色覺自檢data
    function emptyColorData() {
        ColorCheckNo = 0
        RedBlind = []
        GreenBlind = []
        CountClean()
    }

    //算出陣列的平均
    function averageArray(myVisionResult) {
        let sum = myVisionResult.reduce((a, b) => a + b);
        let avg = (sum / myVisionResult.length).toFixed(1);
        return avg
    }

    function getRandomDirect() {  //取得答案
        let directArray = ['TurnLeft', 'TurnDown', 'TurnRight', 'TurnUp']
        let i = Math.floor(Math.random()*4);
        let direct = directArray[i]
        return direct
    };

     function getRandomShape() {  //取得答案
        let ShapeArray = ['square', 'round', 'triangle', 'diamond']
        let i = Math.floor(Math.random()*4);
        let Shape = ShapeArray[i]
        return Shape
    };

    function NumberRandom() { 
        let x = Math.floor(Math.random()*4);
        return x
    };

    

    function pushVision(id) {
        myVision = parseFloat($(`.EyeCheck[data-id='${id}']`).attr("data-result"))
        myVisionResult.push(myVision)
    }

    function ChangeImage(id, nextid , nextAnswer) { //切換圖片
        $(".EyeCheck").each(function () {$(this).attr("class","EyeCheck").attr("data-answer", "").fadeOut() }) //清空之前的題目答案
        $(`.EyeCheck[data-id='${id + nextid}']`).addClass("activeShow").addClass(nextAnswer).attr("data-answer", nextAnswer).fadeIn()
    }

    let OringinWidth = parseInt($(".screenReset").css("width").replace("px", ""))
    let CheckTestOringinWidth = parseInt($(".CheckTest").css("width").replace("px", ""))

    function changSize(i) {
        let screenResetwidth = parseInt($(".screenReset").css("width").replace("px",""))
        let newscreenResetWidth = screenResetwidth + (i)
        let resetStand = newscreenResetWidth / OringinWidth
        let newCheckTestWidth = CheckTestOringinWidth * resetStand

        $(".screenReset").css("width", newscreenResetWidth)
        $(".CheckTest").css("width", newCheckTestWidth)
    }

    function changSizeUseRange(i) {
        let newscreenResetWidth = i
        let resetStand = newscreenResetWidth / OringinWidth
        let newCheckTestWidth = CheckTestOringinWidth * resetStand

        $(".screenReset").css("width", newscreenResetWidth)
        $(".CheckTest").css("width", newCheckTestWidth)
    }

    $(".selectSlide").click(function () {
        let id = $(this).attr("data-id")
        let text = $(this).attr("data-text")
        $(`img[data-slide='${id}']`).addClass("active")
        $(`img[data-slide='${id}']`).siblings("img").removeClass("active")
        $(`.selectSlide[data-slide='${id}']`).addClass("active")
        $(`.selectSlide[data-slide='${id}']`).siblings(".selectSlide").removeClass("active")
        $(".HowToUseTitle").text(text)
    })

    $(".nextBtn").click(function () {
        let length = $(this).siblings(".slide").length
        let add = parseInt($(this).attr("data-id"))
       

        let id = parseInt($(this).siblings(".slide.active").attr("data-slide")) + add
        if (id > length) {
            id = 1
        } else if(id < 1) {
            id = length
        }
        $(this).siblings(`img[data-slide='${id}']`).addClass("active")
        $(this).siblings(`img[data-slide='${id}']`).siblings("img").removeClass("active")
        let text = $(this).siblings(".slide.active").attr("data-text")
        $(`.selectSlide[data-slide='${id}']`).addClass("active")
        $(`.selectSlide[data-slide='${id}']`).siblings(".selectSlide").removeClass("active")
        $(".HowToUseTitle").text(text)
    })

    function showVal(data) {
        changSizeUseRange(parseInt(data))
    }
    

</script>
</body>
</html>